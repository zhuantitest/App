// backend/src/utils/keyword.ts

export const CATEGORY_KEYWORDS: Record<string, string[]> = {
  // —— 支出 —— //
  食物: [
    '晚餐', '宵夜', '燒肉', '火鍋', '牛排', '壽司', '義大利麵', '披薩', '拉麵', '餐廳', 
    '聚餐', '吃飯', 'ubereats', 'foodpanda', '熱炒', '薑母鴨', '羊肉爐', '壽喜燒', '鐵板燒', 
    '居酒屋', '夜市', '滷肉飯', '牛肉麵', '水餃', '鍋貼', '炒飯', '燴飯', '咖哩', '便當店', 
    '三商巧福', '鬍鬚張', '丹丹', '胖老爹', '拿坡里', '王品', '西堤', '陶板屋', '夏慕尼', 
    '饗食天堂', '漢來海港', '旭集', '欣葉', '鼎泰豐', '添好運', '點水樓', '金色三麥', 
    '乾杯', '老乾杯', '馬辣', '新馬辣', '涮乃葉', '石二鍋', '十二鍋', '錢都', '輕井澤', 
    '屋馬', '茶六', '碳佐麻里', '橘色', '橘焱', '胡同', '老四川', '太和殿', '鼎王', 
    '無老鍋', '這一鍋', '老先覺', '三媽', '大呼過癮', '貴族世家', '我家牛排', '孫東寶', 
    '義式屋', '古拉爵', 'skylark', '洋蔥', '法樂琪', '貳樓', '樂子', '澳美客', '溫德', 
    '君悅', '凱菲屋', '饗饗', '旭集', '美福', '寒舍', '探索廚房', '栢麗廳', '遠東', ' Café',
    '午餐', '便當', '速食', '麥當勞', '肯德基', '自助餐', '公司餐', '簡餐', 'ubereats', 
    'foodpanda', '麵店', '自助餐', '飯糰', '三明治', 'subway', '涼麵', '羹麵', '米粉湯', 
    '陽春麵', '切仔麵', '滷味', '鴨肉飯', '雞肉飯', '排骨飯', '雞腿飯', '爌肉飯', '魚肚飯', 
    '蝦仁飯', '鵝肉飯', '豬腳飯', '炒麵', '炒米粉', '肉羹', '魷魚羹', '花枝羹', '四神湯', 
    '肉圓', '碗粿', '米糕', '粽子', '潤餅', '春捲', '割包', '臭豆腐', '蚵仔煎', '大腸麵線', 
    '甜不辣', '關東煮', '車輪餅', '雞蛋糕', '蔥油餅', '韭菜盒', '水煎包', '小籠包', '蒸餃', 
    '燒賣', '腸粉', '河粉', '撈麵', '意麵', '鍋燒麵', '烏龍麵', '蕎麥麵', '鴨血', '臭臭鍋', 
    '個人鍋', '小火鍋', '咖哩飯', '蛋包飯', '親子丼', '牛丼', '豬排飯', '鰻魚飯', '定食', 
    '丼飯', '握壽司', '捲壽司', '軍艦', '手卷', '生魚片', '天婦羅', '炸蝦', '可樂餅', '唐揚',
    '點心', '甜點', '蛋糕', '烘焙', '小吃', '冰品', '鬆餅', '餅乾', '泡芙', '雞排', '鹽酥雞', 
    '鹹酥雞', '滷味', '豆花', '愛玉', '仙草', '蜜餞', '車輪餅', '雞蛋糕', '地瓜球', '甜甜圈', 
    '馬卡龍', '泡芙', '布丁', '果凍', '巧克力', '洋芋片', '乖乖', '科學麵', '品客', '爆米花', 
    '鳳梨酥', '太陽餅', '老婆餅', '綠豆椪', '蛋黃酥', '月餅', '牛軋糖', '沙其馬', '口糧', 
    '營養口糧', '蘇打餅', '夾心餅', '威化餅', '蛋捲', '捲心酥', '孔雀餅', '煎餅', '米果', 
    '仙貝', '鱈魚香絲', '豬肉乾', '牛肉乾', '魷魚絲', '芒果乾', '蜜餞', '話梅', '陳皮', '甘草', 
    '糖果', '軟糖', '硬糖', '牛奶糖', '巧克力棒', '健達', '金莎', '雷神', '明治', '森永', 
    '冰淇淋', '霜淇淋', '雪花冰', '刨冰', '豆花', '花生湯', '紅豆湯', '燒仙草', '湯圓', 
    '芝麻糊', '杏仁茶', '油條', '燒餅', '豆漿', '米漿', '饅頭', '包子', '銀絲卷', '馬來糕'
  ],
  飲品: [
     '飲品', '飲料', '咖啡', '手搖', '珍奶', '星巴克', '拿鐵', '鮮奶茶', '茶飲', '烏龍茶', 
    '青茶', '綠茶', '紅茶', '奶茶', '珍奶', '波霸', '珍珠', '椰果', '清心', '五十嵐', '可不可', 
    '迷客夏', '茶湯會', '麻古', '大苑子', 'cama', '路易莎', '一芳', '龜記', '再睡五分鐘', 
    '鮮奶', '豆漿', '米漿', '果汁', '養樂多', '氣泡水', '可樂', '雪碧', '舒跑', '寶礦力', 
    '冬瓜茶', '青草茶', '仙草茶', '楊桃汁', '甘蔗汁', '檸檬汁', '柳橙汁', '葡萄汁', '蘋果汁', 
    '西瓜汁', '芒果汁', '芭樂汁', '多多綠', '百香綠', '翡翠綠', '四季春', '金萱', '普洱', 
    '鐵觀音', '包種茶', '高山茶', '蜜茶', '桂花釀', '黑糖', '薑茶', '人參茶', '菊花茶', 
    '枸杞茶', '洛神花', '玫瑰花', '水果茶', '冰沙', '奶昔', '思樂冰', '芬達', '黑松', '維大力', 
    '蘋果西打', '麥茶', '玄米茶', '抹茶', '焙茶', '阿華田', '美祿', '好立克', ' Ovaltine', 
    '伯朗', '韋恩', '西雅圖', '貝納頌', '左岸', 'city cafe', 'let\'s cafe', 'hi cafe', 
    '丹堤', '怡客', '多那之', '85度c', '春水堂', '天仁', '喫茶趣', '貢茶', '快樂檸檬', 'coco',
    '粉粿','檸檬','多多'
  ],
  酒類: [
    '酒', '酒類', '酒吧', '啤酒', '紅酒', '威士忌', '調酒', '小酌', '白酒', '清酒', '燒酎', 
    '梅酒', '水果酒', '氣泡酒', '香檳', '雞尾酒', '伏特加', '蘭姆酒', '琴酒', '龍舌蘭', 
    '白蘭地', '干邑', '軒尼詩', '人頭馬', '馬爹利', '約翰走路', '尊尼獲加', '麥卡倫', 
    '格蘭菲迪', '山崎', '竹鶴', '余市', '宮城峽', '獺祭', '十四代', '久保田', '八海山', 
    '菊正宗', '月桂冠', '大關', '白鶴', ' Sapporo', 'Asahi', 'Kirin', 'Suntory', '台啤', 
    '台灣啤酒', '金牌', '18天', '經典', '生啤', '黑啤', '小麥', '艾爾', '拉格', '司陶特', 
    '波特', 'IPA', 'APA', '修道院', 'Trappist', 'Chimay', 'Rochefort', 'Westvleteren', 
    'Orval', 'Duvel', 'Hoegaarden', 'Stella', 'Artois', 'Heineken', 'Corona', 'Budweiser', 
    'Miller', 'Coors', 'Guinness', 'Carlsberg', 'Tsingtao', '海尼根', '可樂娜', '百威', 
    '米勒', '庫斯', '健力士', '嘉士伯', '青島', '紅白酒', '葡萄酒', '冰酒', '貴腐', '甜酒', 
    '不甜', 'dry', 'sweet', '半甜', '半干', '氣泡', '靜態', '白酒', '白葡萄酒', '紅酒', 
    '紅葡萄酒', '粉紅', 'rosé', '香檳', 'Champagne', '氣泡', 'sparkling', 'Prosecco', 
    'Cava', 'Asti', 'Moscato', 'Chardonnay', 'Sauvignon', 'Blanc', 'Riesling', 'Pinot', 
    'Grigio', 'Gewürztraminer', 'Chenin', 'Blanc', 'Semillon', 'Viognier', 'Cabernet', 
    'Sauvignon', 'Merlot', 'Pinot', 'Noir', 'Syrah', 'Shiraz', 'Zinfandel', 'Malbec', 
    'Tempranillo', 'Sangiovese', 'Nebbiolo', 'Barbera', 'Gamay', 'Grenache', 'Mourvedre', 
    'Carignan', 'Cinsault', '年份', 'vintage', '產區', '產地', '莊園', '酒莊', '城堡', 
    'chateau', 'domaine', '等級', 'AOC', 'DOC', 'DOCG', 'IGP', 'VDP', '餐酒', 'table', 
    'wine', '珍藏', 'reserve', '特藏', 'gran', 'reserva', '陳年', 'aging', '桶陳', 'barrel', 
    '橡木', 'oak', '法國', '波爾多', 'Bordeaux', '勃艮第', 'Burgundy', '香檳', 'Champagne', 
    '隆河', 'Rhone', '羅亞爾', 'Loire', '阿爾薩斯', 'Alsace', '義大利', 'Italy', '皮埃蒙特', 
    'Piedmont', '托斯卡尼', 'Tuscany', '威尼托', 'Veneto', '西班牙', 'Spain', '里奧哈', 'Rioja', 
    '斗羅', 'Douro', '普里奧拉', 'Priorat', '德國', 'Germany', '摩澤爾', 'Mosel', '萊茵高', 
    'Rheingau', '美國', 'USA', '納帕', 'Napa', '索諾瑪', 'Sonoma', '澳洲', 'Australia', 
    '巴羅莎', 'Barossa', '獵人谷', 'Hunter', '紐西蘭', 'New', 'Zealand', '馬爾堡', 'Marlborough', 
    '智利', 'Chile', '中央', 'Valley', '阿根廷', 'Argentina', '門多薩', 'Mendoza', '南非', 
    'South', 'Africa', '斯泰倫博斯', 'Stellenbosch', '調酒', '雞尾酒', 'cocktail', '瑪格麗特', 
    'Margarita', '莫吉托', 'Mojito', '黛綺莉', 'Daiquiri', '威士忌', '酸', 'Whiskey', 'Sour', 
    '老式', 'Old', 'Fashioned', '曼哈頓', 'Manhattan', '內格羅尼', 'Negroni', '馬丁尼', 'Martini', 
    '柯夢波丹', 'Cosmopolitan', '長島', '冰茶', 'Long', 'Island', 'Iced', 'Tea', '性感', '海灘', 
    'Sex', 'on', 'the', 'Beach', '螺絲起子', 'Screwdriver', '血瑪麗', 'Bloody', 'Mary', '白色', 
    '俄羅斯', 'White', 'Russian', '黑色', 'Black', 'Russian', '龍舌蘭', '日出', 'Tequila', 
    'Sunrise', '藍色', '夏威夷', 'Blue', 'Hawaii', '新加坡', '司令', 'Singapore', 'Sling', 
    '邁泰', 'Mai', 'Tai', ' Zombie', '琴', '通寧', 'Gin', 'Tonic', '伏特加', '萊姆', 'Vodka', 
    'Lime', '蘭姆', '可樂', 'Rum', 'Coke', '自由', '古巴', 'Cuba', 'Libre', '教父', 'Godfather', 
    '教母', 'Godmother', '鏽釘', 'Rusty', 'Nail', '黑色', '天鵝絨', 'Black', 'Velvet', '貝里尼', 
    'Bellini', '含羞草', 'Mimosa', '皇家', '基爾', 'Kir', 'Royal', '愛爾蘭', '咖啡', 'Irish', 
    'Coffee', '熱', '托迪', 'Hot', 'Toddy', '蛋酒', 'Eggnog', '桑格利亞', 'Sangria', '潘趣', 'Punch'
  ],
  購物: [
    '購物', '買東西', '網購', '蝦皮', 'momo', 'PChome', '淘寶', '露天', '下單', '代購', '開箱', 
    '全聯', '家樂福', '大潤發', '好市多', 'costco', '寶雅', '屈臣氏', '康是美', '松果', '金石堂', 
    '誠品', '博客來', '東森', 'yahoo購物', '團購', '合購', '預購', '免運', '折價券', '優惠券', 
    '特價', '出清', '換季', '周年慶', '雙11', '雙12', '618', '99節', '黑色星期五', '母親節', 
    '父親節', '年中慶', '年末慶', '福袋', '限時搶購', '滿額贈', '滿額折', '刷卡禮', '來店禮', 
    '會員日', '超級星期五', 'line購物', 'shopback', '導購', '現金回饋', '點數', '紅利', 
    '集點', '印花', '滿千送百', '第二件半價', '買一送一', '加一元多一件', '超取', '宅配', 
    '貨到付款', '7-11', '全家', '萊爾富', 'ok', '超商取貨', 'ibon', 'famiport', 'ecpay', 
    '綠界', '信用卡付款', '分期', '零利率', '3期', '6期', '12期', '24期', '無卡分期', 'affirm'
  ],
  交通: [
    '交通', '捷運', '公車', '計程車', 'uber', '共乘', '租車', '油錢', '加油', '加油站', 
    '高速公路', '停車費', '停車', '火車', '高鐵', '車票', '車資', '機票', '悠遊卡', '一卡通', 
    'icash', '儲值', '票卡', '公車', '客運', '國光', '統聯', '和欣', '捷運', 'ubike', 'youbike', 
    '共享機車', 'irent', 'goshare', 'wemo', '租機車', '租汽車', 'etag', '高速公路', '國道', 
    '台鐵', '區間車', '自強', '莒光', '普悠瑪', '太魯閣', 'emu3000', '觀光列車', '商務艙', 
    '經濟艙', '廉航', '虎航', '樂桃', '酷航', '捷星', '亞航', '長榮', '華航', '星宇', '立榮', 
    '華信', '台灣虎航', '機場稅', '燃料稅', '兵險', '機場接送', '租wifi', 'sim卡', '漫遊', 
    '行李托運', '超重', '選位費', '餐食', '保險', '旅遊平安險', '租gps', '導航', '地圖', 
    '過路費', '回數票', 'etc', '遠通', '停車場', '路邊停車', '月租', '臨停', '代駕', '拖吊', 
    '罰單', '超速', '闖紅燈', '違停', '酒駕', '吊扣', '吊銷', '駕訓班', '考照', '體檢', '換照'
  ],
  洗衣服: [
    '洗衣', '洗衣店', '自助洗衣', '烘衣', '乾洗', '洗衣粉', '柔軟精', '洗衣精', '洗衣膠囊', 
    '漂白水', '去漬劑', '衣領精', '芳香豆', '防蟎', '抗菌', '防皺', '熨斗', '掛燙機', '燙衣板', 
    '洗衣機', '滾筒', '雙槽', '脫水', '烘乾機', '瓦斯型', '電熱型', '除濕', '晾衣', '衣架', 
    '曬衣夾', '曬衣繩', '曬衣竿', '洗衣袋', '網袋', '細網', '粗網', '手洗', '預洗', '浸泡', 
    '強洗', '標準', '快洗', '省水', '節能', '投幣', '刷卡', '代幣', '儲值', '會員', '送洗', 
    '取件', '襯衫', '西裝', '大衣', '禮服', '皮草', '地毯', '窗簾', '床組', '被套', '枕頭', 
    '玩偶', '鞋子', '包包', '修改', '織補', '釘扣', '換拉鍊', '縮水', '褪色', '染整', '復原', 
    '污損', '賠償', '保潔', '送洗單', '收據', '憑證', '會員卡', 'app', '預約', '到府收送'
  ],
  娛樂: [
     '娛樂', '電影', '電影院', '遊戲', '主機', 'Switch', 'PS5', 'Steam', '演唱會', '音樂', 
    '表演', '漫畫', '動漫', '網飛', 'Netflix', 'KTV', '卡啦OK', '桌遊', 'YouTube Premium', 
    '追劇', 'disney+', 'spotify', 'kkbox', 'apple music', '手遊', '課金', '儲值', '點數卡', 
    'mycard', 'gash', 'steam', 'origin', 'epic', 'playstation', 'xbox', '任天堂', '寶可夢', 
    '夾娃娃', '扭蛋', '漫展', 'ff', 'cwt', '同人展', '展覽', '博物館', '美術館', '遊樂園', 
    '六福村', '劍湖山', '義大', '麗寶', '九族', '小人國', '動物園', '海生館', '天文館', '科博館', 
    '兒童樂園', '親子館', '運動中心', '健身房', '游泳池', '溫泉', '泡湯', '三溫暖', 'spa', 
    '按摩', '指壓', '油壓', '腳底', '刮痧', '拔罐', '美容', '美甲', '美睫', '紋繡', '接髮', 
    '染髮', '燙髮', '剪髮', '洗頭', '造型', '髮廊', '理容', '男士理髮', '百元剪髮', '快剪', 
    '書店', '文具店', '禮品店', '花店', '寵物店', '水族館', '釣蝦', '保齡球', '撞球', '射擊', 
    '攀岩', '滑冰', '滑雪', '高爾夫', '練習場', '打擊場', '籃球場', '羽球場', '網球場', '足球場'
  ],
  日用品: [
    '日用品', '衛生紙', '牙膏', '洗髮精', '沐浴乳', '洗衣精', '洗碗精', '牙刷', '棉花棒', 
    '毛巾', '衛生棉', '刮鬍刀', '肥皂', '洗面乳', '清潔劑', '濕紙巾', '塑膠袋', '收納盒', 
    '垃圾袋', '馬桶刷', '拖把', '保養品', '化妝品', '面膜', '防曬', '隱形眼鏡', '藥水', 
    '衛生棉條', '護墊', '棉花棒', '牙線', '漱口水', '洗碗機', '濾芯', '燈泡', '電池', '延長線', 
    '工具箱', '黏塵滾輪', '除濕劑', '防潮箱', '收納', '衣架', '菜瓜布', '鋼刷', '魔布', '抹布', 
    '餐巾紙', '廚房紙巾', '保鮮膜', '保鮮袋', '鋁箔紙', '烘焙紙', '油紙', '烤盤', '砧板', 
    '刀具', '鍋具', '鍋鏟', '湯勺', '濾網', '濾勺', '量杯', '量匙', '計時器', '溫度計', 
    '烤箱', '微波爐', '電鍋', '快煮壺', '熱水瓶', '飲水機', '濾水器', '淨水器', '軟水器', 
    '除濕機', '空氣清淨機', '吸塵器', '掃地機器人', '電風扇', '循環扇', '暖爐', '電暖器', 
    '涼蓆', '蚊帳', '電蚊香', '防蚊液', '殺蟲劑', '蟑螂藥', '老鼠藥', '捕蚊燈', '蒼蠅拍', 
    '鞋櫃', '鞋架', '鞋拔', '雨傘', '雨衣', '雨鞋', '拖鞋', '室內拖', '浴室拖', '地墊', '門墊'
  ],
  書費: [
    '書費', '書本', '教科書', '參考書', '講義', '圖書', '租書', '買書', '書局', '書店', '博客來', 
    '金石堂', '誠品', '讀冊', '三民', '墊腳石', '諾貝爾', '何嘉仁', '敦煌', '書林', '師大書苑', 
    '校園書房', '基督教書房', '佛具店', '經書', '雜誌', '期刊', '月刊', '週刊', '日刊', '報紙', 
    '蘋果', '自由', '中時', '聯合', '經濟', '商業', '財訊', '天下', '遠見', '商周', '今周刊', 
    'smart', 'money', '財經', '投資', '股票', '基金', '房地產', '保險', '稅務', '法律', '醫學', 
    '健康', '養生', '食譜', '烹飪', '烘焙', '手作', '工藝', '美術', '繪畫', '書法', '音樂', 
    '樂譜', '戲劇', '電影', '攝影', '設計', '建築', '室內', '景觀', '電腦', '程式', '網路', 
    '電玩', '遊戲', '動漫', '漫畫', '小說', '文學', '詩集', '散文', '歷史', '地理', '旅遊', 
    '語言', '英文', '日文', '韓文', '法文', '德文', '西文', '義文', '俄文', '阿拉伯文', '辭典', 
    '字典', '百科', '全書', '兒童', '青少年', '成人', '考試', '證照', '留學', '移民', '求職', 
    '履歷', '面試', '創業', '管理', '行銷', '銷售', '廣告', '公關', '媒體', '新聞', '傳播'
  ],
  社交: [
    '社交', '聚會', '同學會', '活動費', '會費', '約會', '朋友聚', '生日', '慶生', '派對', 
    '婚禮', '喜宴', '紅包', '禮金', '彌月', '滿月', '週歲', '抓周', '畢業', '謝師', '送舊', 
    '迎新', '尾牙', '春酒', '開工', '慶功', '慶祝', '紀念', '周年', '開幕', '開張', '喬遷', 
    '入厝', '暖房', 'housewarming', '喪禮', '告別式', '白包', '慰問', '探病', '慰問金', 
    '捐款', '慈善', '公益', '義賣', '義演', '義診', '志工', '服務', '社區', '里民', '鄰居', 
    '聯誼', '相親', '婚友', '交友', '軟體', 'app', '網站', '會員', '月費', '年費', '點數', 
    '信用', '評價', '匹配', '聊天', '訊息', '通話', '視訊', '見面', '約見', '咖啡約', '飯局', 
    '酒局', '茶敘', '餐敘', '宵夜場', '夜唱', '夜衝', '夜遊', '露營', '烤肉', '野餐', '郊遊', 
    '踏青', '登山', '健行', '溯溪', '攀岩', '潛水', '衝浪', '滑雪', '滑冰', '騎馬', '射箭', 
    '漆彈', '生存', '遊戲', '團康', '大地', '遊戲', '闖關', '任務', '解謎', '逃脫', '密室', 
    '劇本', '殺人', '狼人', '阿瓦隆', '三國', '殺', '撲克', '麻將', '棋類', '圍棋', '象棋', '西洋棋'
  ],
  其他: [
    '不明', '其他', '未分類', '雜費', '臨時費用', '代墊款', '補貼', '暫付款', '預付款', 
    '待確認', '待分類', '問題', '錯誤', '更正', '調整', '沖銷', '轉帳', '匯款', '手續費', 
    '服務費', '處理費', '快遞', '郵寄', '掛號', '包裹', '宅配', '貨運', '物流', '順豐', 
    'dhl', 'fedex', 'ups', 'tnt', '郵局', 'ems', '國際', '海關', '關稅', '檢疫', '證明', 
    '文件', '證件', '申請', '登記', '註冊', '報名', '報到', '報銷', '核銷', '請款', '報帳', 
    '發票', '收據', '憑證', '單據', '合約', '契約', '協議', '公證', '認證', '鑑定', '評估', 
    '檢測', '檢驗', '檢查', '診斷', '證明', '報告', '鑑價', '估價', '報價', '投標', '得標', 
    '簽約', '訂金', '頭款', '尾款', '中期', '分期', '融資', '貸款', '借款', '還款', '利息', 
    '本金', '違約', '罰款', '賠償', '補償', '和解', '調解', '仲裁', '訴訟', '律師', '顧問', 
    '諮詢', '輔導', '訓練', '課程', '講座', '研討', '工作坊', '座談', '論壇', '會議', '會談'
  ],
  水電費: [
    '水電費', '水費', '電費', '瓦斯', '瓦斯費', '台電', '自來水', '瓦斯桶', '瓦斯公司', 
    '台灣電力', '台灣自來水', '欣桃', '欣中', '欣南', '欣隆', '欣湖', '欣嘉', '欣營', '欣高', 
    '欣林', '欣雲', '欣屏', '欣苗', '欣竹', '大台北', '北水', '南水', '竹水', '苗水', '中水', 
    '北電', '中電', '南電', '東電', '離島', '再生能源', '太陽能', '風力', '水力', '核能', 
    '火力', '燃氣', '燃煤', '燃油', '綠電', '憑證', '碳權', '排放', '節能', '減碳', 'ESCO', 
    '能源管理', '智慧電表', '電子帳單', '自動扣款', '逾期', '催繳', '斷水', '斷電', '斷瓦斯', 
    '復水', '復電', '復瓦斯', '基本費', '流動費', '度數', '錶號', '用戶', '戶號', '帳號', 
    '通知單', '繳費單', '收據', '發票', '載具', '條碼', '超商', '代收', '轉帳', '信用卡', 
    '行動支付', 'line pay', '街口', 'pi', '悠遊付', '一卡通', 'icash', '感應', '掃碼', 'NFC'
  ],
  學費: [
     '學費', '補習費', '報名費', '學雜費', '註冊費', '學分費', '考試費', '學校', '幼兒園', 
    '幼稚園', '托兒所', '安親班', '才藝班', '課後班', '輔導班', '升學', '國小', '國中', '高中', 
    '高職', '五專', '二專', '四技', '二技', '大學', '碩士', '博士', '研究所', '在職', 'EMBA', 
    '推廣', '進修', '學分班', '證照班', '訓練班', '語言', '英文', '日文', '韓文', '法文', 
    '德文', '西文', '義文', '俄文', '阿拉伯文', '托福', 'TOEFL', '雅思', 'IELTS', '多益', 
    'TOEIC', '全民英檢', 'GEPT', '日檢', 'JLPT', '韓檢', 'TOPIK', '德檢', 'TestDaF', '法檢', 
    'DELF', '西檢', 'DELE', '義檢', 'CILS', '俄檢', 'TORFL', '中檢', 'TOCFL', 'HSK', 'SAT', 
    'ACT', 'GRE', 'GMAT', 'LSAT', 'MCAT', 'AP', 'IB', 'A-Level', '預科', '先修', '留學', 
    '遊學', '交換', '訪問', '研習', '實習', '見習', '培訓', '講習', '研討', '工作坊', '營隊', 
    '夏令營', '冬令營', '育樂營', '科學營', '數學營', '寫作營', '藝術營', '音樂營', '舞蹈營', 
    '體育營', '籃球營', '游泳營', '足球營', '棒球營', '羽球營', '網球營', '武術營', '圍棋營'
  ],
  房租: [
    '房租', '租屋', '租房', '押金', '房東', '租金', '月租', '季租', '年租', '預付', '後付', 
    '轉帳', '匯款', '現金', '支票', '本票', '契約', '合約', '公證', '鑑價', '估價', '市場', 
    '行情', '地段', '區域', '商圈', '學區', '捷運', '公車', '交通', '便利', '生活', '機能', 
    '環境', '品質', '管理', '保全', '警衛', '監視', '門禁', '卡', '感應', '密碼', '指紋', 
    '人臉', '辨識', '電梯', '樓梯', '公寓', '大樓', '華廈', '透天', '別墅', '套房', '雅房', 
    '分租', '合租', '整層', '家庭', '單身', '學生', '上班', '商用', '辦公', '店面', '攤位', 
    '倉庫', '廠房', '土地', '農地', '建地', '工業', '住宅', '混合', '使用', '違建', '加蓋', 
    '頂樓', '地下室', '夾層', '挑高', '複式', '樓中樓', '開放', '一房', '兩房', '三房', '四房', 
    '五房', '廳', '衛', '陽台', '花園', '露台', '車位', '平面', '機械', '升降', '塔式', '坡道', 
    '停車', '車庫', '車棚', '充電', '電動', '車', '摩托', '機車', '腳踏', '單車', '重機', '紅牌'
    //（支出/收入共用同名分類）
  ],
  直播: [
        '直播', '抖內', '斗內', '打賞', '虛擬禮物', 'Twitch', 'YouTube 會員', '訂閱（直播）', 
    'super chat', 'super sticker', 'super thanks', '會員', '頻道', '加入', '月費', '年費', 
    '徽章', '表情', '貼圖', 'emote', 'bit', 'cheer', 'donate', 'paypal', 'streamlabs', 
    'stream elements', 'obs', 'xsplit', 'vmix', '導播', '混音', '音效', '視訊', '鏡頭', 
    'webcam', 'logitech', 'elgato', 'capture', '擷取', '遊戲', '實況', 'walkthrough', '攻略', 
    'speedrun', '競速', '破關', '成就', '獎杯', 'trophy', 'achievement', '排名', '天梯', 
    '積分', 'elo', 'mmr', '配對', 'matchmaking', '隊友', '對手', '公會', '公會戰', 'raid', 
    '副本', 'dungeon', 'boss', '王', '稀有', '掉落', 'loot', '裝備', '武器', '防具', '飾品', 
    '寵物', '坐騎', 'mount', 'skin', '外觀', '造型', 'cosmetic', '季票', 'battle pass', 
    '戰鬥', '通行證', '賽季', 'season', '活動', 'event', '任務', 'quest', '每日', '每週', 
    '每月', '成就', '挑戰', '獎勵', 'reward', '寶箱', 'chest', '抽獎', 'gacha', '轉蛋', 
    '扭蛋', '機率', '概率', '保底', 'pity', '合成', 'craft', '強化', 'enhance', '升級', 
    'level', '經驗', 'exp', '技能', 'skill', '天賦', 'talent', '屬性', 'stat', '生命', 
    'mana', '魔法', '耐力', 'stamina', '力量', 'str', '敏捷', 'agi', '智力', 'int', '幸運', 'luk'
  ],
  機車: [
     '機車', '機車維修', '機油', '保養', '機車零件', '機車停車', '摩托車', '速克達', '檔車', 
    '重機', '紅牌', '黃牌', '白牌', '輕型', '普通', '重型', '大型', '電動', 'gogoro', '宏佳騰', 
    '山葉', 'YAMAHA', '光陽', 'KYMCO', '三陽', 'SYM', '台鈴', 'SUZUKI', '哈特佛', 'Hartford', 
    '偉士牌', 'VESPA', '比雅久', 'PIAGGIO', '杜卡迪', 'DUCATI', '哈雷', 'Harley', '寶馬', 'BMW', 
    '川崎', 'KAWASAKI', '本田', 'HONDA', '輪胎', '胎壓', '胎紋', '磨耗', '更換', '補胎', 
    '內胎', '外胎', '無內胎', 'tubeless', '鋼絲', '鋁圈', '鑄造', '鍛造', '剎車', '煞車', 
    '來令', '煞車皮', '碟盤', '卡鉗', '總泵', '油管', 'abs', '防鎖死', 'cbs', '連動', '懸吊', 
    '避震', '前叉', '後避', '彈簧', '阻尼', '預載', '調整', '車架', '龍頭', '手把', '握把', 
    '油門', '離合器', '拉桿', '煞車桿', '後照鏡', '鏡子', '大燈', '頭燈', '尾燈', '煞車燈', 
    '方向燈', '閃爍', '繼電器', '燈泡', 'led', 'hid', '鹵素', '燈具', '燈殼', '儀表', '碼表', 
    '時速', '轉速', '油表', '水溫', '電壓', '里程', 'odo', 'trip', '歸零', '鑰匙', '鎖頭', 
    '電門', '啟動', '按鈕', '熄火', '開關', '坐墊', '行李箱', '置物', '掛鉤', '腳踏', '踏板', 
    '飛旋', '後座', '乘客', '腳踏', '後架', '貨架', '保桿', '防撞', '保險桿', '排氣管', '排氣', 
    '消音', '觸媒', '隔熱', '防燙', '改裝', '原廠', '副廠', '正廠', 'OEM', '售後', '服務', 
    '保修', '保固', '檢驗', '驗車', '排氣', '定檢', '監理', '站', '過戶', '變更', '顏色', '引擎'
  ],
  信用卡: [
        '信用卡', '年費', '循環利息', '違約金', '卡費', '滯納金', '手續費', '預借', '現金', 
    '分期', '零利率', '3期', '6期', '12期', '24期', '30期', '帳單', '結帳', '繳款', '最低', 
    '全額', '自動', '扣款', '轉帳', '超商', '代收', '便利', '商店', '7-11', '全家', '萊爾富', 
    'ok', 'ibon', 'famiport', '多媒體', '機台', 'app', '線上', '網路', '銀行', '行動', '支付', 
    'line pay', '街口', 'pi', '悠遊付', '一卡通', 'icash', '感應', '刷卡', '插卡', '接觸', 
    '非接觸', 'NFC', '磁條', '晶片', '簽名', '密碼', '預授', '權', '請款', '清算', '結算', 
    '匯率', '外幣', '美元', '日圓', '歐元', '英鎊', '澳幣', '加幣', '港幣', '人民幣', '韓元', 
    '泰銖', '新加坡', '幣', '手續', '費', '國外', '交易', '服務', '費', '退款', '退貨', '取消', 
    '爭議', '款', '調單', '簽單', '明細', '消費', '記錄', '通知', '簡訊', 'email', '推播', 
    '活動', '優惠', '回饋', '現金', '點數', '紅利', '里程', '哩程', '機場', '貴賓', '室', 
    '接送', '保險', '旅平', '旅遊', '不便', '延誤', '行李', '盜刷', '遺失', '掛失', '補發', 
    '換發', '升等', '降級', '額度', '調整', '臨時', '永久', '預借', '現金', '密碼', '申請', 
    '開卡', '啟用', '停用', '凍結', '解凍', '剪卡', '銷戶', '清償', '證明', '聯徵', '信用', '報告'
  ],
  醫療: [
     '醫療','醫生','藥局','藥房','看病','掛號','健保','健保卡','牙醫','牙齒','洗牙','補牙','拔牙','眼科','視力檢查','驗光','配眼鏡','皮膚科','痘痘','濕疹',
    '中醫','把脈','針灸','推拿','感冒藥','退燒藥','止痛藥','止咳藥','生病','頭痛','咳嗽','發燒','流鼻水','喉嚨痛','醫院','大醫院','小醫院','診所','急診',
    '藥品','處方藥','成藥','藥劑師','疫苗','打針','流感疫苗','新冠疫苗','保健品','維他命','魚油','益生菌','保健食品','體檢','健檢','健康檢查','全身檢查',
    '掛號費','醫療費','醫藥費','住院費','病房費','病歷','住院','出院','手術','動手術','麻醉','檢驗','抽血','驗尿','X光','CT','核磁共振','超音波','血壓',
    '心電圖','復健','物理治療','心理諮商','身心科','精神科','內科','外科','骨科','耳鼻喉科','小兒科','婦產科','泌尿科','腸胃科','腎臟科','心臟科','癌症',
    '腫瘤科','藥單','領藥','藥袋','衛教','護理師','護士','看診','掛急診','藥價','醫療險','醫保','看專科','慢性病','高血壓','糖尿病','心臟病','健檢報告',
    '繃帶'
  ],
  禮物: [
     '禮物','送禮','生日禮物','禮品','伴手禮','禮盒','巧克力','花束','玫瑰花','禮卡','禮券','紅包','結婚禮物','聖誕禮物','情人節禮物','母親節禮物',
    '父親節禮物','教師節禮物','紀念日禮物','驚喜','小禮物','手工禮物','DIY禮物','禮金','新年禮物','交換禮物','紀念品','小物','飾品','手錶','項鍊','耳環',
    '戒指','手環','手機殼','香水','化妝品','保養品','護手霜','玩偶','娃娃','抱枕','公仔','模型','手辦','精品','名牌包','皮夾','錢包','圍巾','衣服','鞋子',
    '球鞋','帽子','墨鏡','運動用品','書籍','筆記本','文具','相框','相簿','相機','耳機','藍牙耳機','喇叭','家電','咖啡機','吹風機','刮鬍刀','餐具','杯子',
    '馬克杯','水瓶','茶具','酒','紅酒','威士忌','香檳','零食禮盒','餅乾禮盒','蛋糕','生日蛋糕','甜點','禮袋','禮籃','水果禮盒','保健品','營養品','維他命',
    '按摩器','小電器','家飾','蠟燭','香氛','擴香','飾品盒','禮物袋','包裝紙','蝴蝶結','驚喜禮盒','收藏品','限量品','旅行券','體驗券','電影票'
  ],
  寵物: [
    '寵物飼料','狗飼料','貓飼料','寵物零食','乾糧','濕糧','罐頭','寵物用品','貓砂','狗籠','寵物床','寵物衣服','牽繩','項圈','貓抓板','玩具','咬膠','磨牙棒',
    '洗澡','美容','修毛','修指甲','獸醫','寵物醫院','打疫苗','驅蟲','洗耳朵','洗牙','寄生蟲治療','寵物保險','寵物健康檢查','寵物藥品','藥膏','藥水',
    '耳藥','眼藥','口服藥','護理用品','寵物護理','除臭','清潔','寵物刷毛','貓抓墊','貓爬架','貓樹','寵物籠','旅行籠','寵物背包','寵物外出用品',
    '飲水器','食碗','自動餵食器','飲食用品','運動用品','跳台','玩耍用品','智力玩具','訓練用品','寵物牽引','遛狗繩','寵物安全','寵物防護','寵物健康',
    '寵物保健品','維他命','鈣片','毛髮保養','毛髮清潔','毛髮營養','洗毛精','寵物香波','寵物潤絲','毛刷','寵物美容剪刀','耳刷','牙刷','牙膏','口腔護理',
    '寵物眼睛護理','寵物耳朵護理','寵物指甲剪','防跳蚤','防蟲','寵物消毒','寵物專用香水','寵物旅行用品','寵物玩偶','訓練零食','寵物餐具','食盆','飲水盆',
    '智能餵食器','自動飲水器','寵物監控','寵物定位','貓抓板補充','寵物床墊','保暖用品','寵物手套','防滑襪','寵物雨衣','寵物防寒','寵物外出背包'
  ],
  服飾美妝: [
    '衣服','褲子','裙子','外套','上衣','T恤','襯衫','連衣裙','牛仔褲','短褲','運動服','內衣',
    '內褲','襪子','鞋子','運動鞋','球鞋','拖鞋','靴子','高跟鞋','包包','手提包','背包','斜背包',
    '肩背包','錢包','手拿包','化妝包','飾品','項鍊','耳環','手鍊','戒指','髮飾','髮夾','髮圈','髮帶','帽子','眼鏡',
    '墨鏡','圍巾','手套','腰帶','皮帶','領帶','領結','雨傘','美妝品','化妝品','口紅','唇膏','眼影','睫毛膏',
    '腮紅','粉底','遮瑕','眉筆','指甲油','美髮','洗髮精','護髮素','髮膜','造型品','吹風機','電棒',
    '電捲棒','直髮器','染髮','美髮沙龍','剪髮','保養品','乳液','面霜','化妝水','精華液','眼霜',
    '防曬','護手霜','身體乳','保濕','美白','抗老','面膜','卸妝','潔面','去角質','身體磨砂','香水',
    '香氛','指甲護理','足部護理','護唇膏','護甲油','護髮油','頭皮護理','美容院','美容護理','手足保養',
    '造型護理','保養套裝','美妝工具','化妝刷','海綿粉撲','美妝蛋','髮梳','髮刷','髮夾套裝','髮帶套裝'
  ],

  // —— 收入 —— //
  零用錢: [
    '零用錢','家人給','父母給','津貼','生活費','家用','壓歲錢','紅包錢','日常費用','花用','伙食費','交通費','學費','書錢','午餐錢','早餐錢','晚餐錢',
    '飲料錢','零食錢','買東西','零花錢','日常花費','小錢','零錢','短缺補助','每月生活費','每週生活費','學校津貼','社團費','活動費','房租補助','學雜費',
    '加菜金','零花基金','出門錢','口袋錢','學生補助','家庭補助','家教費','學習費','補習費','課本錢','文具錢','日用品費','網路費','電話費','電費補助',
    '水費補助','父母贊助','親戚給','祖父母給','姑姑給','叔叔給','阿姨給','哥哥給','姐姐給','兄弟姊妹給','親友給','親戚壓歲錢','生日紅包','年節紅包',
    '生活津貼','零用金','額外零花','臨時補助','生活補助','補助款','午餐補助','早餐補助','交通補助','學餐費','學校補助','父母支持','額外津貼','節日壓歲錢',
    '期末紅包','考試獎勵','家庭資助','學費資助','同學補助','小額補助','同學借錢','朋友給','小額支持','口袋基金','月零用','周零用','額外贊助','隨手零錢',
    '同學資助','臨時花費','日常用錢','打工補助','小額津貼','娛樂費','遊戲點數','手機費','影視費','零星支出'
],
  薪水: [
    '薪水','工資','月薪','周薪','時薪','加班費','薪資','底薪','薪水單','薪轉','薪轉戶','打工費','兼職費','工讀費','薪酬','收入','工資卡','工資條',
    '薪水入帳','基本工資','勞務費','代班費','津貼','津貼費','獎金薪資','日薪','月領','雙周薪','年度薪水','薪俸','薪給','薪金','薪津','加給','全勤獎金',
    '伙食津貼','交通津貼','房屋津貼','績效獎金','分紅獎金','佣金','銷售獎金','業績獎金','津補','勞務支薪','工資入帳','匯薪','薪資匯入','代發薪資','提成',
    '提成費','工作收入','就業收入','工資補助','薪資補助','勞工薪資','年薪','總薪資','薪水卡','薪資戶','工資收入','獎金加給','外快','兼職收入','兼差收入',
    '勞健保扣款後','扣稅後薪水','勞保給付','薪資報表','薪水條','工資單','銀行薪資轉帳','工資轉帳','工資存入','薪水發放','工錢','工資所得','薪俸所得',
    '代領薪資','薪水補助','時薪制','月薪制','年薪制','薪水調整','加薪','漲薪','升遷加給','薪水進帳','薪資明細','實領薪水','工資補發','延遲發薪','薪水日'
  ],
  回饋: [
    '回饋','現金回饋','刷卡回饋','紅利點數','折讓','返利','退款','退費','折扣','滿額回饋','滿額折扣','購物金','購物回饋','回饋金','回贈','折抵','抵用',
    '優惠','折扣券','回饋券','折價券','滿額贈','滿額送','會員回饋','會員折扣','會員專屬','現折','消費折扣','打折','特價','限時折扣','促銷回饋','折扣活動',
    '優惠活動','購物回贈','積分回饋','積分兌換','點數回饋','點數折抵','信用卡回饋','信用卡折扣','銀行回饋','金融卡回饋','分期回饋','現金折抵','現金回贈',
    '消費回饋','累積點數','兌換禮券','電子票券回饋','現金券','禮券折抵','回贈金','超商回饋','購物平台回饋','APP回饋','滿額折現','買一送一','滿件折扣',
    '組合優惠','儲值回饋','現金積分','儲值贈送','回饋比例','回饋率','限時回饋','周年慶回饋','滿額送券','滿額加贈','折扣回贈','退款折抵','退貨退款',
    '促銷優惠','購物津貼','刷卡金','現金積點','折抵金','消費回贈','活動優惠','優惠券','折價回饋','特價折扣','促銷折扣','折扣回饋','儲值優惠','回饋方案',
    '店家回饋','商家優惠','品牌回饋','滿額回贈','購物抵用','折抵方案','點數金','會員積分','現折回饋','電子回饋','返現','滿減','折扣碼','折扣金'
  ],
  交易: [
    '交易','收款','轉帳入','匯入','收現','入帳','匯款','轉帳','銀行轉帳','ATM轉帳','網銀轉帳','手機轉帳','代收','代付款','付款入帳','支付入帳','收現金',
    '現金入帳','存款','現金存入','匯款入帳','薪轉入帳','股息入帳','利息入帳','退款入帳','獎金入帳','電子支付入帳','支付寶入帳','街口支付入帳','LINE Pay入帳',
    '微信支付入帳','悠遊付入帳','一卡通入帳','電子錢包入帳','收款紀錄','收入紀錄','款項入帳','帳款入帳','代收款','代付款','入帳成功','匯款成功','交易完成',
    '交易紀錄','交易成功','存入','匯入款項','支付款項','轉入','代領款','公司付款','薪水入帳','保險理賠入帳','醫療費入帳','退稅入帳','補助入帳','補貼入帳',
    '現金轉入','轉帳匯入','帳戶收款','戶頭收款','現金收取','交易入款','收款入帳','匯款收入','現金收入','付款紀錄','資金入帳','轉帳成功','匯款通知',
    '交易通知','金流入帳','金流收款','轉帳款項','代繳入帳','代收入帳','訂單入帳','電商收款','退款收入','紅包入帳','贊助入帳','借款入帳','還款入帳',
    '投資收益入帳','股利入帳','基金入帳','匯兌入帳','境外入帳','跨行轉帳','跨行匯款','即時轉帳','手續費入帳','補款入帳','帳單入帳'
  ],
  獎金: [ '獎金','年終','績效獎金','分紅','紅利','獎勵金','獎金入帳','加給獎金','專案獎金','任務獎金','考核獎金','達標獎金','季度獎金','月獎金','年獎金',
    '特別獎金','假日獎金','全勤獎金','績效分紅','提成獎金','銷售獎金','業績獎金','高績效獎金','激勵獎金','專屬獎金','限定獎金','一筆獎金','年度分紅',
    '股東分紅','營業分紅','紅利獎金','公司獎金','企業獎金','機構獎金','津貼獎金','獎金補助','團隊獎金','合作獎金','比賽獎金','競賽獎金','抽獎獎金',
    '活動獎金','抽成獎金','佣金獎金','專利獎金','研發獎金','創新獎金','技術獎金','獎學金','研究獎金','考試獎金','加碼獎金','公司紅利','年終紅利',
    '分紅獎勵','激勵紅利','實習獎金','工讀獎金','兼職獎金','外快獎金','臨時獎金','應急獎金','慰問金','安家費','退休金獎金','績效獎勵','銷售分紅',
    '個人獎金','團體獎金','績效提成','銷售提成','達成獎金','完成獎金','任務達標獎金','補貼獎金','工資獎金','薪水獎金','年資獎金','服務獎金','忠誠獎金',
    '貢獻獎金','嘉獎','鼓勵金','競賽紅利','體育獎金','冠軍獎金','亞軍獎金','季軍獎金','安慰獎金','參與獎金','研究補助','人才獎金','績效給付','企業分紅'
],
  股息: [
    '股息','配息','現金股利','股利','股票股利','股票配息','分紅股息','現金紅利','紅利股息','現金分紅','股東分紅','股息收入','股利收入','配股','送股',
    '股利入帳','股息入帳','股息紅利','利息收入','投資分紅','基金配息','ETF配息','債券利息','投資收益','定存利息','現金股息','股票利得','投資分紅金',
    '公司配息','年度配息','季度配息','分期配息','股東紅利','持股分紅','持股配息','股息再投資','股息收益','股息現金','股息存入','分派股利','年度股利',
    '季度股利','分期股利','派息','派發股利','分配股息','投資回饋','股利補助','股息補助','股票收入','基金股息','ETF股息','分配紅利','分配收益','收益股息',
    '長期股息','短期股息','穩定股息','公司股息','企業股息','股息報酬','股息給付','利息分紅','投資紅利','持有收益','派發收益','派發紅利','股票現金股利',
    '股票紅利','紅利再投資','再投入股息','股息獲利','股票收益','股息獎金','定期配息','定期派息','分派紅利','配發現金','股息現金流','股息回饋','股票分紅',
    '基金分紅','ETF分紅','利息配息','股息收入金','被動收入','被動股息','現金被動收入','現金流股息','現金配息','股息投資','存股股息','股息回報'
  ],
  投資: [
    '投資收益','資本利得','股票賣出','基金贖回','ETF收益','幣圈獲利','股市獲利','股票交易','股票收益','股價差價','股票套利','股票分紅','基金收益',
    '基金回報','基金利得','基金報酬','基金投資收益','ETF報酬','ETF利得','ETF獲利','幣圈收益','虛擬幣收益','比特幣獲利','以太幣獲利','加密貨幣收益',
    '投資回報','理財收益','理財產品收益','存款利息','定存利息','活存利息','債券收益','債券利息','房地產投資','租金收益','不動產投資收益','土地收益',
    '金融投資','證券投資收益','投資分紅','投資利得','投資報酬','投資回饋','投資獎金','投資紅利','投資配息','投資股息','股票買賣收益','基金買賣收益',
    'ETF買賣收益','幣圈買賣收益','股票交易收益','基金交易收益','ETF交易收益','幣圈交易收益','股票投資回報','基金投資回報','ETF投資回報','幣圈投資回報','股票獲利入帳',
    '基金獲利入帳','ETF獲利入帳','幣圈獲利入帳','股票賣出收益','基金贖回收益','ETF贖回收益','幣圈兌換收益','投資收益入帳','理財收益入帳','存款收益入帳','債券收益入帳',
    '房地產收益入帳','金融投資收益入帳','證券投資收益入帳','投資回報入帳','投資分紅入帳','投資利得入帳','投資報酬入帳','投資回饋入帳','投資獎金入帳','投資紅利入帳','投資配息入帳'
  ],
};

export function classifyCategory(note: string): string {
  const text = note || '';
  for (const [category, keywords] of Object.entries(CATEGORY_KEYWORDS)) {
    if (keywords.some((kw) => text.includes(kw))) return category;
  }
  return '其他';
}

// === 收據用的關鍵字工具（貼在 keyword.ts 檔尾） ===

// 如果你已經有 DRINK_TOKENS，這段改成：export { DRINK_TOKENS } from './xxx';
export const DRINK_TOKENS = [
  '茶','烏龍','青茶','紅茶','綠茶','奶茶','咖啡','拿鐵','美式','可可',
  '可樂','雪碧','汽水','果汁','飲料','手搖','珍奶','珍珠','波霸','奶蓋','冰沙',
  '冬瓜','青草','仙草','薏仁','楊桃','柳橙','葡萄柚','檸檬','青檸','多多','麥香'
];

export const RECEIPT_STOP_WORDS = [
  '微糖','少糖','半糖','全糖','無糖','正常糖',
  '去冰','微冰','少冰','常溫','熱','溫',
  '大杯','中杯','小杯'
];

export function normalizeForMatch(s: string) {
  return String(s || '')
    .normalize('NFKC')
    .toLowerCase()
    .replace(/[()\/\\【】\[\]{}]/g,' ')
    .replace(/[ \t]+/g, ' ')
    .trim();
}

// 把 CATEGORY_KEYWORDS 變成「關鍵字 → 類別」的字典；
// 若原類別是「餐飲」，含飲品詞則歸「飲品」，否則歸「食物」
export function buildReceiptLexicon(dict: Record<string, string[]> = CATEGORY_KEYWORDS) {
  const lex: Record<string, string> = {};
  for (const [cat, arr] of Object.entries(dict)) {
    for (const kw of arr || []) {
      const k = normalizeForMatch(kw);
      if (!k) continue;
      if (cat === '餐飲') {
        lex[k] = DRINK_TOKENS.some(t => k.includes(normalizeForMatch(t))) ? '飲品' : '食物';
      } else {
        lex[k] = cat;
      }
    }
  }
  return lex;
}

// 給收據分類快速命中；可選擇傳入白名單 categories 限制可回傳類別
export function keywordCategoryForReceipt(name: string, categories?: string[]) {
  const s = normalizeForMatch(
    String(name || '')
      .replace(/（/g,'(').replace(/）/g,')')
      .replace(new RegExp(RECEIPT_STOP_WORDS.join('|'), 'gi'), ' ')
      .replace(/\s+/g, ' ')
  );
  const lex = buildReceiptLexicon();
  for (const [kw, cat] of Object.entries(lex)) {
    if (s.includes(kw)) {
      const mapped = cat === '餐飲'
        ? (DRINK_TOKENS.some(t => s.includes(normalizeForMatch(t))) ? '飲品' : '食物')
        : cat;
      if (!categories || categories.includes(mapped)) return mapped;
    }
  }
  if (DRINK_TOKENS.some(t => s.includes(normalizeForMatch(t)))) {
    if (!categories || categories.includes('飲品')) return '飲品';
  }
  if (s.includes('粉粿')) {
    if (!categories || categories.includes('食物')) return '食物';
  }
  return null;
}
